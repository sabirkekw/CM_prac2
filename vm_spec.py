COMMANDS = {
    'LOAD_CONST': {
        'opcode': 7,
        'fields': [
            ('A', 0, 2),      # Биты 0-2: код операции (7)
            ('B', 3, 26),     # Биты 3-26: константа (24 бита)
            ('C', 27, 31)     # Биты 27-31: адрес регистра (5 битов)
        ],
        'size': 4,            # Размер команды: 4 байта
        'test': (7, 964, 26, [0x27, 0x1E, 0x00, 0xD0])
    },
    'READ_MEM': {
        'opcode': 1,
        'fields': [
            ('A', 0, 2),      # Биты 0-2: код операции (1)
            ('B', 3, 7),      # Биты 3-7: адрес регистра (5 битов)
            ('C', 8, 18),     # Биты 8-18: смещение (11 битов)
            ('D', 19, 23)     # Биты 19-23: адрес регистра результата (5 битов)
        ],
        'size': 3,            # Размер команды: 3 байта
        'test': (1, 16, 280, 3, [0x81, 0x18, 0x19])
    },
    'WRITE_MEM': {
        'opcode': 0,
        'fields': [
            ('A', 0, 2),      # Биты 0-2: код операции (0)
            ('B', 3, 7),      # Биты 3-7: адрес регистра источника (5 битов)
            ('C', 8, 12)      # Биты 8-12: адрес регистра назначения (5 битов)
        ],
        'size': 2,            # Размер команды: 2 байта
        'test': (0, 26, 17, [0xD0, 0x11])
    },
    'POPCNT': {
        'opcode': 5,
        'fields': [
            ('A', 0, 2),      # Биты 0-2: код операции (5)
            ('B', 3, 7),      # Биты 3-7: адрес регистра источника (5 битов)
            ('C', 8, 12)      # Биты 8-12: адрес регистра результата (5 битов)
        ],
        'size': 2,            # Размер команды: 2 байта
        'test': (5, 21, 1, [0xAD, 0x01])
    }
}

COMMAND_BY_MNEMONIC = {
    'LOAD': 'LOAD_CONST',
    'READ': 'READ_MEM',
    'WRITE': 'WRITE_MEM',
    'POPCNT': 'POPCNT'
}

def get_command_by_opcode(opcode):
    for cmd_name, cmd_info in COMMANDS.items():
        if cmd_info['opcode'] == opcode:
            return cmd_name, cmd_info
    return None, None